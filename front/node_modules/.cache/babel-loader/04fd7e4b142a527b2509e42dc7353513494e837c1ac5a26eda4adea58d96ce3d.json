{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u0420\\u0430\\u0431\\u043E\\u0442\\u044B Java\\\\Spring-chat-front\\\\front\\\\src\\\\MessageList.tsx\",\n  _s = $RefreshSig$();\nimport { useQuery } from \"react-query\";\nimport { List, ListItem, Paper } from \"@mui/material/\";\nimport { Avatar, Box, Button, Container } from \"@mui/material\";\nimport { lightBlue } from \"@mui/material/colors\";\nimport { ArrowDownwardRounded } from \"@mui/icons-material\";\nimport { useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function MessageList() {\n  _s();\n  const fetchMessages = async () => {\n    const res = await fetch(\"http://localhost:8080/chat/messages\");\n    return res.json();\n  };\n  const {\n    data: messages,\n    isLoading\n  } = useQuery({\n    queryFn: async () => {\n      return fetchMessages();\n    },\n    refetchInterval: 2000,\n    queryKey: [\"data\"]\n  });\n  const listRef = useRef(null);\n  const scrollDown = () => {\n    if (listRef.current) {\n      listRef.current.scrollTop = listRef.current.scrollHeight;\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 27\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Container, {\n      sx: {\n        width: '65%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(List, {\n        ref: listRef,\n        className: \"smooth-scroll-list\",\n        sx: {\n          m: 3,\n          position: 'relative',\n          overflow: 'auto',\n          width: '80%',\n          maxHeight: '70vh'\n        },\n        children: messages === null || messages === void 0 ? void 0 : messages.map(message => /*#__PURE__*/_jsxDEV(ListItem, {\n          children: /*#__PURE__*/_jsxDEV(Paper, {\n            elevation: 1,\n            sx: {\n              p: 1,\n              paddingLeft: 2,\n              display: 'inline-flex',\n              paddingRight: 3\n            },\n            children: [/*#__PURE__*/_jsxDEV(Avatar, {\n              sx: {\n                maxHeight: 27,\n                maxWidth: 27,\n                bgcolor: lightBlue[400]\n              },\n              children: message.userName[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                marginLeft: 2\n              },\n              children: [message.userName, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 70,\n                columnNumber: 37\n              }, this), message.message]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this)\n        }, message.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: scrollDown,\n        children: /*#__PURE__*/_jsxDEV(ArrowDownwardRounded, {\n          color: 'action'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 9\n  }, this);\n}\n_s(MessageList, \"CW+OIhC9Sg96qXcQ1zXml+Idy9w=\", false, function () {\n  return [useQuery];\n});\n_c = MessageList;\nvar _c;\n$RefreshReg$(_c, \"MessageList\");","map":{"version":3,"names":["useQuery","List","ListItem","Paper","Avatar","Box","Button","Container","lightBlue","ArrowDownwardRounded","useRef","jsxDEV","_jsxDEV","MessageList","_s","fetchMessages","res","fetch","json","data","messages","isLoading","queryFn","refetchInterval","queryKey","listRef","scrollDown","current","scrollTop","scrollHeight","children","fileName","_jsxFileName","lineNumber","columnNumber","sx","width","ref","className","m","position","overflow","maxHeight","map","message","elevation","p","paddingLeft","display","paddingRight","maxWidth","bgcolor","userName","marginLeft","id","onClick","color","_c","$RefreshReg$"],"sources":["D:/Работы Java/Spring-chat-front/front/src/MessageList.tsx"],"sourcesContent":["import { useQuery } from \"react-query\";\r\nimport { List, ListItem, Paper } from \"@mui/material/\";\r\nimport { Avatar, Box, Button, Container } from \"@mui/material\";\r\nimport { lightBlue } from \"@mui/material/colors\";\r\nimport { ArrowDownwardRounded } from \"@mui/icons-material\";\r\nimport { useRef } from \"react\";\r\n\r\ntype messageType = {\r\n    id: string,\r\n    message: string,\r\n    userName: string,\r\n    messageTime: string,\r\n};\r\n\r\nexport function MessageList() {\r\n    const fetchMessages = async () => {\r\n        const res = await fetch(\"http://localhost:8080/chat/messages\");\r\n        return res.json();\r\n    };\r\n\r\n    const { data: messages, isLoading } = useQuery({\r\n        queryFn: async () => {\r\n            return fetchMessages();\r\n        },\r\n        refetchInterval: 2000,\r\n        queryKey: [\"data\"],\r\n    });\r\n\r\n    const listRef = useRef<HTMLUListElement | null>(null);\r\n\r\n    const scrollDown = () => {\r\n        if (listRef.current) {\r\n            listRef.current.scrollTop = listRef.current.scrollHeight;\r\n        }\r\n    };\r\n\r\n    if (isLoading) return <div>Loading...</div>;\r\n\r\n    return (\r\n        <div>\r\n            <Container sx={{ width: '65%' }}>\r\n                <List\r\n                    ref={listRef}\r\n                    className=\"smooth-scroll-list\"\r\n                    sx={{\r\n                        m: 3,\r\n                        position: 'relative',\r\n                        overflow: 'auto',\r\n                        width: '80%',\r\n                        maxHeight: '70vh',\r\n                    }}\r\n                >\r\n                    {messages?.map((message: messageType) => (\r\n                        <ListItem key={message.id}>\r\n                            <Paper\r\n                                elevation={1}\r\n                                sx={{ p: 1, paddingLeft: 2, display: 'inline-flex', paddingRight: 3 }}\r\n                            >\r\n                                <Avatar\r\n                                    sx={{\r\n                                        maxHeight: 27,\r\n                                        maxWidth: 27,\r\n                                        bgcolor: lightBlue[400],\r\n                                    }}\r\n                                >\r\n                                    {message.userName[0]}\r\n                                </Avatar>\r\n                                <Box sx={{ marginLeft: 2 }}>\r\n                                    {message.userName}\r\n                                    <br />\r\n                                    {message.message}\r\n                                </Box>\r\n                            </Paper>\r\n                        </ListItem>\r\n                    ))}\r\n                </List>\r\n                <Button onClick={scrollDown}>\r\n                    <ArrowDownwardRounded color={'action'} />\r\n                </Button>\r\n            </Container>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}